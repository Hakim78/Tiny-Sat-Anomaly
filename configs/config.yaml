# =============================================================================
# Tiny-Sat-Anomaly Configuration
# =============================================================================
# Hydra configuration file for satellite telemetry anomaly detection
# All hyperparameters are centralized here - NO hard-coding in source files

# -----------------------------------------------------------------------------
# Data Configuration
# -----------------------------------------------------------------------------
data:
  raw_path: "data/raw"
  processed_path: "data/processed"
  train_ratio: 0.8
  val_ratio: 0.1
  test_ratio: 0.1
  # Telemanom dataset specific
  dataset_name: "telemanom"
  channels: null  # null=synthetic data, or list channels: ["A-1"]

# -----------------------------------------------------------------------------
# Model Architecture
# -----------------------------------------------------------------------------
model:
  input_size: 25          # Number of features per timestep
  hidden_size: 128        # LSTM hidden dimension
  num_layers: 2           # Number of stacked LSTM layers
  num_classes: 2          # Binary classification (normal/anomaly)
  dropout: 0.2            # Dropout rate for regularization
  bidirectional: false    # Use bidirectional LSTM

# -----------------------------------------------------------------------------
# Training Configuration
# -----------------------------------------------------------------------------
training:
  window_size: 50         # Sequence length for input windows
  batch_size: 64
  epochs: 100
  learning_rate: 0.001
  weight_decay: 1e-5      # L2 regularization
  early_stopping_patience: 15
  gradient_clip: 1.0      # Gradient clipping threshold

  # Class weights for imbalanced data (anomalies are rare)
  # Higher weight for anomaly class (index 1)
  class_weights:
    - 1.0   # Normal class weight
    - 10.0  # Anomaly class weight

# -----------------------------------------------------------------------------
# Optimizer Configuration
# -----------------------------------------------------------------------------
optimizer:
  name: "adam"
  betas:
    - 0.9
    - 0.999
  eps: 1e-8

# -----------------------------------------------------------------------------
# Scheduler Configuration
# -----------------------------------------------------------------------------
scheduler:
  name: "reduce_on_plateau"
  factor: 0.5
  patience: 5
  min_lr: 1e-6

# -----------------------------------------------------------------------------
# Logging & Tracking
# -----------------------------------------------------------------------------
logging:
  level: "INFO"
  log_dir: "outputs/logs"

wandb:
  enabled: false  # SET TO true TO ENABLE WANDB
  project: "tiny-sat-anomaly"
  entity: null            # Set your WandB username/team
  run_name: null          # Auto-generated if null
  tags:
    - "lstm"
    - "anomaly-detection"
    - "telemanom"

# -----------------------------------------------------------------------------
# Checkpointing
# -----------------------------------------------------------------------------
checkpoint:
  save_dir: "outputs/checkpoints"
  save_best_only: true
  metric: "val_f1_anomaly"        # Metric to monitor for best model
  mode: "max"             # "max" for f1, "min" for loss

# -----------------------------------------------------------------------------
# Reproducibility
# -----------------------------------------------------------------------------
seed: 42

# -----------------------------------------------------------------------------
# Hardware
# -----------------------------------------------------------------------------
device: "auto"            # "auto", "cuda", "cpu"
num_workers: 0  # Set to 4 on Linux/Mac
pin_memory: true

# -----------------------------------------------------------------------------
# Hydra Configuration
# -----------------------------------------------------------------------------
hydra:
  run:
    dir: outputs/${now:%Y-%m-%d}/${now:%H-%M-%S}
  sweep:
    dir: outputs/multirun/${now:%Y-%m-%d}/${now:%H-%M-%S}
    subdir: ${hydra.job.num}
